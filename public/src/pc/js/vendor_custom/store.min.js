(function(){function getObjType(object){return Object.prototype.toString.call(object).match(/^\[object\s(.*)\]$/)[1]}function extend(){var options,name,src,copy,copyIsArray,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=false;if(typeof target==="boolean"){deep=target;target=arguments[1]||{};i=2}if(typeof target!=="object"&&!jQuery.isFunction(target)){target={}}if(length===i){target=this;--i}for(;i<length;i++){if((options=arguments[i])!=null){for(name in options){src=target[name];copy=options[name];if(target===copy){continue}if(deep&&copy&&(getObjType(copy)==="Object"||(copyIsArray=Array.isArray(copy)))){if(copyIsArray){copyIsArray=false;clone=src&&Array.isArray(src)?src:[]}else{clone=src&&getObjType(copy)==="Object"?src:{}}target[name]=extend(deep,clone,copy)}else{if(copy!==undefined){target[name]=copy}}}}}return target}var store=function(data,act){this.sdata=null;this.sact=[];if(data){this.sdata=data}if(act){this.sact=act}this.dataer=function(data,key){if(data){this.sdata=data;if(getObjType(this.sact)==="Array"){var acts=this.sact;acts.map(function(fun){if(getObjType(fun.args)==="Array"){fun.args.push(data);if(typeof fun==="function"){fun.apply(fun.args[0],[fun.args[0],data])}}else{if(typeof fun==="function"){fun(data)}}})}if(getObjType(this.sact)==="Object"){var sacts=this.sact;if(key){if(sacts[key]){var fun=sacts[key];if(getObjType(fun.args)==="Array"){fun.args.push(data);if(typeof fun==="function"){fun.apply(fun.args[0],fun.args)}}else{if(typeof fun==="function"){fun(data)}}}}else{for(var item in sacts){if(typeof sacts[item]==="function"){var fun=sacts[item];if(getObjType(fun.args)==="Array"){fun.args.push(data);if(typeof fun==="function"){fun.apply(fun.args[0],fun.args)}}else{if(typeof fun==="function"){fun(data)}}}}}}}else{if(getObjType(this.sact)==="Array"){var acts=this.sact;acts.map(function(fun){if(getObjType(fun.args)==="Array"){if(typeof fun==="function"){fun.apply(fun.args[0],fun.args)}}else{if(typeof fun==="function"){fun()}}})}if(getObjType(this.sact)==="Object"){var sacts=this.sact;if(key){if(sacts[key]){var fun=sacts[key];if(getObjType(fun.args)==="Array"){fun.args.push(data);if(typeof fun==="function"){fun.apply(fun.args[0],fun.args)}}else{if(typeof fun==="function"){fun(data)}}}}else{for(var item in sacts){if(typeof sacts[item]==="function"){var fun=sacts[item];if(getObjType(fun.args)==="Array"){if(typeof fun==="function"){fun.apply(fun.args[0],fun.args)}}else{if(typeof fun==="function"){fun()}}}}}}}};this.acter=function(act){if(act){this.sact.push(act)}};this.setter=function(data,act){if(data){this.sdata=data}if(act){this.sact=act}};this.getter=function(type){if(type==="action"){return this.sact}if(type==="data"){return this.sdata}}};window._stock={};var storeAct={append:function(name,dataOrAct,fun){if(!name||name==""){return false}var save=_stock;if(!save[name]){return false}else{var target;if(getObjType(dataOrAct)==="Object"){if(getObjType(save[name].sdata)==="Object"){target=extend(true,save[name].sdata,dataOrAct);save[name].setter(target)}if(getObjType(save[name].sdata)==="Array"){var tmp=save[name].sdata;tmp.push(dataOrAct);target=tmp;save[name].setter(target)}}else{if(getObjType(save[name].sdata)==="Array"){var tmp=save[name].sdata;tmp.push(dataOrAct);target=tmp;save[name].setter(target)}}}},pop:function(name){if(!name||name==""){return false}var save=_stock;if(save[name]){var tmp=save[name].getter("data");if(getObjType(tmp)==="Array"){var popdata=tmp.pop();save[name].setter(tmp);return[tmp,popdata]}else{return false}}else{return false}},set:function(name,dataOrAct,fun){if(!name||name==""){return false}var save=_stock;if(!save[name]){var thisStore=new store();save[name]=thisStore}if(dataOrAct&&dataOrAct!==""){if(getObjType(dataOrAct)==="Function"){if(getObjType(fun)==="Array"){dataOrAct.args=fun}save[name].acter(dataOrAct)}else{if(getObjType(dataOrAct)==="Object"||getObjType(dataOrAct)==="String"||getObjType(dataOrAct)==="Boolean"){save[name].setter(dataOrAct)}else{if(getObjType(dataOrAct)==="Array"){var isFuns=true;if(!dataOrAct.length){save[name].setter(dataOrAct)}else{dataOrAct.map(function(item,i){if(getObjType(item)!=="Function"){isFuns=false}});if(isFuns){if(getObjType(fun)==="Array"){dataOrAct.map(function(item,i){if(getObjType(fun[i])==="Array"){item.args=fun[i]}else{item.args=[fun[i]]}})}save[name].sact=dataOrAct}else{save[name].setter(dataOrAct)}}}}}}if(getObjType(fun)==="Function"){save[name].acter(fun)}if(getObjType(fun)==="Array"){var isFuns=true;fun.map(function(item,i){if(getObjType(item)!=="Function"){isFuns=false}});if(isFuns){save[name].sact=fun}}if(getObjType(fun)==="Object"){if(save[name].sact){var sact=save[name].sact;if(getObjType(sact)==="Array"){if(!sact.length){sact={}}else{console.log("SA set error, fun is array ");return false}}if(getObjType(sact)==="Object"){var target=extend(sact,fun);save[name].sact=target}}else{save[name].sact=fun}}},get:function(name){if(!name||name==""){return}var save=_stock;if(save[name]){return save[name].getter("data")
}else{return false}},setter:function(name,dataOrAct,fun){if(!name||name==""){return false}var save=_stock;if(!save[name]){var thisStore=new store();save[name]=thisStore}if(getObjType(fun)==="Function"){save[name].acter(fun)}if(getObjType(fun)==="Array"){var isFuns=true;fun.map(function(item,i){if(getObjType(item)!=="Function"){isFuns=false}});if(isFuns){save[name].sact=fun}}if(getObjType(fun)==="Object"){if(save[name].sact){var sact=save[name].sact;if(getObjType(sact)==="Array"){if(!sact.length){sact={}}else{console.log("SA set error, fun is array ");return false}}if(getObjType(sact)==="Object"){var target=extend(sact,fun);save[name].sact=target}}else{save[name].sact=fun}}if(dataOrAct&&dataOrAct!==""){if(getObjType(dataOrAct)==="Function"){if(getObjType(fun)==="Array"){dataOrAct.args=fun}save[name].acter(dataOrAct)}else{if(getObjType(dataOrAct)==="Object"||getObjType(dataOrAct)==="String"||getObjType(dataOrAct)==="Boolean"){save[name].dataer(dataOrAct)}else{if(getObjType(dataOrAct)==="Array"){var isFuns=true;dataOrAct.map(function(item,i){if(getObjType(item)!=="Function"){isFuns=false}});if(isFuns){if(getObjType(fun)==="Array"){dataOrAct.map(function(item,i){if(getObjType(fun[i])==="Array"){item.args=fun[i]}else{item.args=[fun[i]]}})}save[name].sact=dataOrAct}else{save[name].dataer(dataOrAct)}}}}}},getter:function(name){if(!name||name==""){return}var save=_stock;if(save[name]){var that=save[name];function runner(data,key){that.dataer(data,key)}return{run:runner,data:save[name].getter("data"),action:save[name].getter("action")}}else{return false}},deleter:function(name){if(!name||name==""){return}var save=_stock;if(save[name]){delete save[name]}},runner:function(name,ddd,key){if(!name||name==""){return}var save=_stock;if(save[name]){var that=save[name];function runner(data,key){that.dataer(data,key)}var _data=that.getter("data");if(ddd&&getObjType(ddd)==="Object"){_data=extend(true,_data,ddd)}runner(_data,key)}},lister:function(){return Object.keys(_stock)}};window.SA=storeAct})();
